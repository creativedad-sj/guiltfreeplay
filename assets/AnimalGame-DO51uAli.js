import{u as v,r as a,j as e}from"./index-BB6VO97V.js";import{u as F,a as j,b as G,c as l,G as E,F as I}from"./FeedbackMessage-B_sh1LP-.js";import{u as M,G as R}from"./GameOption-CYylNf0S.js";import{C as T}from"./Confetti-2JHVlQgz.js";const z=t=>[...t].sort(()=>Math.random()-.5),L=()=>{const{recordAttempt:t}=v(),r=F(),[c,d]=a.useState(null),[m,u]=a.useState([]),[x,h]=a.useState(0),[f,p]=a.useState(0),[s,i]=a.useState({show:!1,type:"",message:""}),[k,b]=a.useState(null),[A,y]=a.useState(!1),w=j("correct"),N=j("wrong"),C=G(),S={};l.forEach(n=>{S[n.id]=j(n.sound)});const g=a.useCallback(()=>{const n=Math.floor(Math.random()*l.length),o=l[n];d(o),u(z(l)),i({show:!1,type:"",message:""}),r(`Find the ${o.name}`)},[r]);return a.useEffect(()=>{g()},[g]),{currentAnimal:c,shuffledAnimals:m,score:x,attempts:f,feedback:s,shakeId:k,showConfetti:A,handleAnimalClick:n=>{p(o=>o+1),S[n.id]?.(),n.id===c.id?(h(o=>o+1),y(!0),w?.(),t("animal-game",!0),i({show:!0,type:"success",message:"ðŸŽ‰ Amazing!"}),setTimeout(()=>{y(!1),g()},1500)):(C(200),N?.(),b(n.id),t("animal-game",!1),i({show:!0,type:"error",message:"Try again!"}),setTimeout(()=>{b(null),i({show:!1,type:"",message:""})},800))},speak:r}};function q(){const{currentAnimal:t,shuffledAnimals:r,score:c,feedback:d,shakeId:m,showConfetti:u,handleAnimalClick:x,speak:h}=L(),{imageErrors:f,loading:p}=M(l);return p?e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-background",children:[e.jsx("div",{className:"text-6xl animate-bounce mb-4",children:"ðŸ¾"}),e.jsx("div",{className:"text-2xl text-text-secondary font-bold",children:"Loading Fun..."})]}):e.jsxs(E,{title:"Animal Sounds",score:c,children:[e.jsx(I,{feedback:d}),t&&e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-text-secondary mb-2",children:"ðŸ” Find the..."}),e.jsxs("div",{className:"flex items-center justify-center gap-4 bg-gray-100 rounded-full py-3 px-6",children:[e.jsx("span",{className:"text-5xl animate-bounce",children:t.emoji}),e.jsx("span",{className:"text-3xl font-bold text-text-primary",children:t.name}),e.jsx("button",{onClick:()=>h(`Find the ${t.name}`),className:"w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center text-2xl hover:bg-primary/30 transition-colors","aria-label":"Repeat instruction",children:"ðŸ”Š"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 max-w-lg mx-auto",children:r.map(s=>e.jsxs(R,{onClick:()=>x(s),isSelected:t?.id===s.id,shake:m===s.id,children:[e.jsx("div",{className:"w-24 h-24 flex items-center justify-center overflow-hidden rounded-2xl bg-gray-100 mb-2",children:f[s.id]?e.jsx("span",{className:"text-5xl",children:s.emoji}):e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover",loading:"lazy"})}),e.jsx("span",{className:"text-3xl",children:s.emoji}),e.jsx("span",{className:"text-sm font-medium text-text-secondary",children:s.name})]},s.id))}),u&&e.jsx(T,{})]})}export{q as default};
