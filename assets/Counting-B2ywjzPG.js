import{u as v,r as s,j as e}from"./index-Bz7ikJcQ.js";import{u as E,e as x,c as j,d as G,G as O,F as M,a as F}from"./FeedbackMessage-BJ9LOw3J.js";import{C as H}from"./Confetti-Bi_6D6I-.js";const R=()=>{const{recordAttempt:r}=v(),n=E(),[c,l]=s.useState(1),[u,d]=s.useState(x[0]),[m,p]=s.useState(0),[h,g]=s.useState(0),[t,a]=s.useState({show:!1,type:"",message:""}),[y,w]=s.useState(null),[C,b]=s.useState(!1),k=j("correct"),S=j("wrong"),N=G(),f=s.useCallback(()=>{const i=Math.floor(Math.random()*10)+1,o=x[Math.floor(Math.random()*x.length)];l(i),d(o),a({show:!1,type:"",message:""}),n(`How many ${o.name}?`)},[n]);return s.useEffect(()=>{f()},[f]),{count:c,object:u,score:m,attempts:h,feedback:t,shakeId:y,showConfetti:C,handleNumberClick:i=>{g(o=>o+1),i===c?(p(o=>o+1),b(!0),k?.(),r("counting",!0),n("Great counting!"),a({show:!0,type:"success",message:"ðŸŽ‰ Great counting!"}),setTimeout(()=>{b(!1),f()},1500)):(N(200),S?.(),w(i),r("counting",!1),n("Try again"),a({show:!0,type:"error",message:"Oops! Try again"}),setTimeout(()=>{w(null),a({show:!1,type:"",message:""})},800))},speak:n}};function L(){const{count:r,object:n,score:c,feedback:l,shakeId:u,showConfetti:d,handleNumberClick:m,speak:p}=R(),[h,g]=s.useState("portrait");return s.useEffect(()=>{const t=()=>{g(window.innerHeight>window.innerWidth?"portrait":"landscape")};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),e.jsxs(O,{title:"Counting Fun",score:c,children:[e.jsx(M,{feedback:l}),e.jsxs("div",{className:"text-center mb-3",children:[e.jsxs("p",{className:"text-text-secondary text-sm mb-1",children:["How many ",n.name,"?"]}),e.jsxs("div",{className:"flex items-center justify-center gap-3 bg-gray-100 rounded-full py-2 px-4",children:[e.jsx("div",{className:"flex gap-1 text-4xl",children:Array.from({length:r}).map((t,a)=>e.jsx("span",{children:n.emoji},a))}),e.jsx("button",{onClick:()=>p(`How many ${n.name}?`),className:"w-10 h-10 bg-primary/20 rounded-full flex items-center justify-center text-xl hover:bg-primary/30 transition-colors","aria-label":"Repeat instruction",children:"ðŸ”Š"})]})]}),e.jsx("div",{className:`
        grid gap-3 place-items-center h-full
        ${h==="portrait"?"grid-cols-2 grid-rows-2":"grid-cols-4 grid-rows-1"}
      `,children:[1,2,3,4,5,6,7,8,9,10].map(t=>e.jsxs(F,{onClick:()=>m(t),shake:u===t,children:[e.jsx("span",{className:"text-7xl",children:t}),e.jsxs("span",{children:["Number ",t]})]},t))}),d&&e.jsx(H,{})]})}export{L as default};
