import{u as M,r as s,j as t}from"./index-C-zs-pzb.js";import{u as G,e as x,c as k,d as O,G as Y,F as A,a as F}from"./FeedbackMessage-DR7Y84On.js";import{C as P}from"./Confetti-DGbY2BIg.js";const R=["Amazing!","Great job!","You did it!","Wonderful!","Fantastic!","Youre so smart!","Excellent work!","Perfect!","You got it!","Way to go!","Outstanding!","Youre a star!","Beautiful!","Well done!","You made it look easy!"],W=["Good try!","Nice effort!","Almost!","So close!","Keep trying!","Not quite!","Try again!","Youll get it!"],z=()=>{const{recordAttempt:r}=M(),a=G(),[c,i]=s.useState(1),[l,u]=s.useState(x[0]),[d,m]=s.useState(0),[b,h]=s.useState(0),[f,e]=s.useState({show:!1,type:"",message:""}),[p,w]=s.useState(null),[C,j]=s.useState(!1),S=k("correct"),N=k("wrong"),v=O(),y=n=>n[Math.floor(Math.random()*n.length)],g=s.useCallback(()=>{const n=Math.floor(Math.random()*10)+1,o=x[Math.floor(Math.random()*x.length)];i(n),u(o),e({show:!1,type:"",message:""}),a(`How many ${o.name}?`)},[a]);return s.useEffect(()=>{g()},[g]),{count:c,object:l,score:d,attempts:b,feedback:f,shakeId:p,showConfetti:C,handleNumberClick:n=>{if(h(o=>o+1),n===c){const o=y(R);m(E=>E+1),j(!0),S?.(),r("counting",!0),a(o),e({show:!0,type:"success",message:o}),setTimeout(()=>{j(!1),g()},1500)}else{const o=y(W);v(200),N?.(),w(n),r("counting",!1),a(o),e({show:!0,type:"error",message:o}),setTimeout(()=>{w(null),e({show:!1,type:"",message:""})},800)}},speak:a}};function q(){const{count:r,object:a,score:c,feedback:i,shakeId:l,showConfetti:u,handleNumberClick:d,speak:m}=z(),[b,h]=s.useState("portrait");s.useEffect(()=>{const e=()=>{h(window.innerHeight>window.innerWidth?"portrait":"landscape")};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const f=[1,2,3,4,5,6,7,8,9,10];return t.jsxs(Y,{title:"Counting Fun",score:c,children:[t.jsx(A,{feedback:i}),t.jsx("div",{className:"flex-shrink-0 mb-2",children:t.jsxs("div",{className:"flex items-center justify-center gap-2 bg-gray-100 rounded-full py-1 px-3",children:[t.jsx("div",{className:"flex gap-1 text-2xl md:text-3xl",children:Array.from({length:r}).map((e,p)=>t.jsx("span",{children:a.emoji},p))}),t.jsx("button",{onClick:()=>m(`How many ${a.name}?`),className:"w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center text-base hover:bg-primary/30 transition-colors","aria-label":"Repeat instruction",children:"ðŸ”Š"})]})}),t.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0",children:t.jsx("div",{className:"grid grid-cols-5 grid-rows-2 gap-2 w-full h-full max-h-full",children:f.map(e=>t.jsxs(F,{onClick:()=>d(e),shake:l===e,className:"aspect-square",children:[t.jsx("span",{className:"text-4xl md:text-5xl font-bold",children:e}),t.jsxs("span",{className:"text-xs",children:["Number ",e]})]},e))})}),u&&t.jsx(P,{})]})}export{q as default};
