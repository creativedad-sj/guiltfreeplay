import{u as M,r as a,j as e}from"./index-q4Tafjib.js";import{u as Y,c as S,d as C,f as y,G as F,F as T,a as A}from"./FeedbackMessage-D5NxYDaB.js";import{S as O}from"./Stars-BKY7gzyI.js";const P=["Amazing!","Great job!","You did it!","Wonderful!","Fantastic!","Youre so smart!","Excellent work!","Perfect!","You got it!","Way to go!","Outstanding!","Youre a star!","Beautiful!","Well done!","You made it look easy!"],I=["Good try!","Nice effort!","Almost!","Youll get it next time!","That was close!","Keep trying!","Not quite, but great effort!","Youre learning!","Mistakes help us grow!","Every expert started as a beginner!"],R=["Try again!","Give it another shot!","You can do it!","Keep going!","One more try!","I believe in you!","Youve got this!","Dont give up!"],W=n=>{const t=[n],c=y.filter(r=>r.id!==n.id).sort(()=>Math.random()-.5),d=Math.min(2,c.length);for(let r=0;r<d;r++)t.push(c[r]);return t.sort(()=>Math.random()-.5)},z=()=>{const{recordAttempt:n}=M(),t=Y(),[l,c]=a.useState(null),[d,r]=a.useState([]),[m,h]=a.useState(0),[p,g]=a.useState(0),[s,u]=a.useState({show:!1,type:"",message:""}),[k,b]=a.useState(null),[E,j]=a.useState(!1),v=S("correct"),G=S("wrong"),N=C(),f=i=>i[Math.floor(Math.random()*i.length)],x=a.useCallback(()=>{const i=Math.floor(Math.random()*y.length),o=y[i];c(o),r(W(o)),u({show:!1,type:"",message:""}),t(`Find the ${o.label} face`)},[t]);return a.useEffect(()=>{x()},[x]),{target:l,options:d,score:m,attempts:p,feedback:s,shakeId:k,showStars:E,handleEmotionClick:i=>{if(g(o=>o+1),i.id===l.id){const o=f(P);h(w=>w+1),j(!0),v?.(),n("emotion-game",!0),t(o),u({show:!0,type:"success",message:o}),setTimeout(()=>{j(!1),x()},1500)}else{const o=f(I),w=f(R);N(200),G?.(),b(i.id),n("emotion-game",!1),t(o),setTimeout(()=>t(w),800),u({show:!0,type:"error",message:o}),setTimeout(()=>{b(null),u({show:!1,type:"",message:""})},800)}},speak:t}};function B(){const{target:n,options:t,score:l,feedback:c,shakeId:d,showStars:r,handleEmotionClick:m,speak:h}=z(),[p,g]=a.useState("portrait");return a.useEffect(()=>{const s=()=>{g(window.innerHeight>window.innerWidth?"portrait":"landscape")};return s(),window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),e.jsxs(F,{title:"Emotion Game",score:l,children:[e.jsx(T,{feedback:c}),n&&e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("p",{className:"text-text-secondary text-sm mb-1",children:"Find the..."}),e.jsxs("div",{className:"flex items-center justify-center gap-3 bg-gray-100 rounded-full py-2 px-4",children:[e.jsx("span",{className:"text-4xl",children:n.emoji}),e.jsx("span",{className:"text-2xl font-bold text-text-primary",children:n.label}),e.jsx("button",{onClick:()=>h(`Find the ${n.label} face`),className:"w-10 h-10 bg-primary/20 rounded-full flex items-center justify-center text-xl hover:bg-primary/30 transition-colors","aria-label":"Repeat instruction",children:"ðŸ”Š"})]})]}),e.jsx("div",{className:`
        grid gap-3 place-items-center h-full
        ${p==="portrait"?"grid-cols-2 grid-rows-2":"grid-cols-4 grid-rows-1"}
      `,children:t.map(s=>e.jsxs(A,{onClick:()=>m(s),shake:d===s.id,children:[e.jsx("span",{className:"text-7xl",children:s.emoji}),e.jsx("span",{children:s.label})]},s.id))}),r&&e.jsx(O,{})]})}export{B as default};
