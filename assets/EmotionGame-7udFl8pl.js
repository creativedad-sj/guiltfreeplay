import{u as E,r as o,j as e}from"./index-B6Fq74CQ.js";import{u as C,a as b,b as $,e as d,G as F,F as G}from"./FeedbackMessage-Czh7Q1Ce.js";import{S as M}from"./Stars-a2CF-Odt.js";const I=s=>{const t=[s];for(;t.length<3;){const n=d[Math.floor(Math.random()*d.length)];t.some(l=>l.id===n.id)||t.push(n)}return t.sort(()=>Math.random()-.5)},T=()=>{const{recordAttempt:s}=E(),t=C(),[n,l]=o.useState(null),[m,u]=o.useState([]),[h,p]=o.useState(0),[a,S]=o.useState(0),[j,c]=o.useState({show:!1,type:"",message:""}),[k,f]=o.useState(null),[y,g]=o.useState(!1),w=b("correct"),N=b("wrong"),v=$(),x=o.useCallback(()=>{const i=Math.floor(Math.random()*d.length),r=d[i];l(r),u(I(r)),c({show:!1,type:"",message:""}),t(`Find the ${r.label} face`)},[t]);return o.useEffect(()=>{x()},[x]),{target:n,options:m,score:h,attempts:a,feedback:j,shakeId:k,showStars:y,handleEmotionClick:i=>{S(r=>r+1),i.id===n.id?(p(r=>r+1),g(!0),w?.(),s("emotion-game",!0),c({show:!0,type:"success",message:"ðŸ˜Š You got it!"}),setTimeout(()=>{g(!1),x()},1500)):(v(200),N?.(),f(i.id),s("emotion-game",!1),c({show:!0,type:"error",message:"Not quite..."}),setTimeout(()=>{f(null),c({show:!1,type:"",message:""})},800))},speak:t}};function L(){const{target:s,options:t,score:n,feedback:l,shakeId:m,showStars:u,handleEmotionClick:h,speak:p}=T();return e.jsxs(F,{title:"Emotion Game",score:n,children:[e.jsx(G,{feedback:l}),s&&e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-text-secondary mb-2",children:"Find the..."}),e.jsxs("div",{className:"flex items-center justify-center gap-4 bg-gray-100 rounded-full py-3 px-6",children:[e.jsxs("div",{className:`inline-block px-4 py-2 rounded-full ${s.bg} ${s.color} text-2xl font-bold`,children:[s.label," face ",s.emoji]}),e.jsx("button",{onClick:()=>p(`Find the ${s.label} face`),className:"w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center text-2xl hover:bg-primary/30 transition-colors","aria-label":"Repeat instruction",children:"ðŸ”Š"})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-4 max-w-md mx-auto",children:t.map(a=>e.jsxs("div",{onClick:()=>h(a),className:`
              ${a.bg} rounded-3xl p-6 cursor-pointer shadow-lg flex flex-col items-center gap-2
              transition-all transform hover:scale-110 active:scale-90
              ${m===a.id?"animate-shake":""}
            `,role:"button",tabIndex:0,children:[e.jsx("span",{className:"text-7xl",children:a.emoji}),e.jsx("span",{className:`text-lg font-medium ${a.color}`,children:a.label})]},a.id))}),u&&e.jsx(M,{})]})}export{L as default};
