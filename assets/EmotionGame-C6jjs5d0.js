import{u as M,r as o,j as e}from"./index-CEsu_osr.js";import{u as C,c as b,d as F,f as x,G as Y,F as O,a as P}from"./FeedbackMessage-DJqb1_Sv.js";import{S as R}from"./Stars-CXI0mN01.js";const T=["Amazing!","Great job!","You did it!","Wonderful!","Fantastic!","Youre so smart!","Excellent work!","Perfect!","You got it!","Way to go!","Outstanding!","Youre a star!","Beautiful!","Well done!","You made it look easy!"],W=["Good try!","Nice effort!","Almost!","So close!","Keep trying!","Not quite!","Try again!","Youll get it!"],z=a=>{const n=[a],l=x.filter(r=>r.id!==a.id).sort(()=>Math.random()-.5),d=Math.min(2,l.length);for(let r=0;r<d;r++)n.push(l[r]);return n.sort(()=>Math.random()-.5)},A=()=>{const{recordAttempt:a}=M(),n=C(),[c,l]=o.useState(null),[d,r]=o.useState([]),[u,h]=o.useState(0),[p,f]=o.useState(0),[t,m]=o.useState({show:!1,type:"",message:""}),[y,w]=o.useState(null),[k,j]=o.useState(!1),E=b("correct"),v=b("wrong"),N=F(),S=i=>i[Math.floor(Math.random()*i.length)],g=o.useCallback(()=>{const i=Math.floor(Math.random()*x.length),s=x[i];l(s),r(z(s)),m({show:!1,type:"",message:""}),n(`Find the ${s.label} face`)},[n]);return o.useEffect(()=>{g()},[g]),{target:c,options:d,score:u,attempts:p,feedback:t,shakeId:y,showStars:k,handleEmotionClick:i=>{if(f(s=>s+1),i.id===c.id){const s=S(T);h(G=>G+1),j(!0),E?.(),a("emotion-game",!0),n(s),m({show:!0,type:"success",message:s}),setTimeout(()=>{j(!1),g()},1500)}else{const s=S(W);N(200),v?.(),w(i.id),a("emotion-game",!1),n(s),m({show:!0,type:"error",message:s}),setTimeout(()=>{w(null),m({show:!1,type:"",message:""})},800)}},speak:n}};function B(){const{target:a,options:n,score:c,feedback:l,shakeId:d,showStars:r,handleEmotionClick:u,speak:h}=A(),[p,f]=o.useState("portrait");return o.useEffect(()=>{const t=()=>{f(window.innerHeight>window.innerWidth?"portrait":"landscape")};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),e.jsxs(Y,{title:"Emotion Game",score:c,children:[e.jsx(O,{feedback:l}),a&&e.jsx("div",{className:"flex-shrink-0 mb-1",children:e.jsxs("div",{className:"flex items-center justify-center gap-1 bg-gray-100 rounded-full py-0.5 px-2",children:[e.jsx("span",{className:"text-2xl md:text-3xl",children:a.emoji}),e.jsx("span",{className:"text-base md:text-lg font-bold text-text-primary",children:a.label}),e.jsx("button",{onClick:()=>h(`Find the ${a.label} face`),className:"w-6 h-6 bg-primary/20 rounded-full flex items-center justify-center text-sm hover:bg-primary/30 transition-colors","aria-label":"Repeat instruction",children:"ðŸ”Š"})]})}),e.jsx("div",{className:"flex-1 flex items-center justify-center min-h-0",children:e.jsx("div",{className:`
          grid gap-1 w-full h-full max-h-full
          ${p==="portrait"?"grid-cols-2 grid-rows-2":"grid-cols-4 grid-rows-1"}
        `,children:n.map(t=>e.jsxs(P,{onClick:()=>u(t),shake:d===t.id,children:[e.jsx("span",{className:"text-[clamp(2.5rem,10vw,5rem)]",children:t.emoji}),e.jsx("span",{children:t.label})]},t.id))})}),r&&e.jsx(R,{})]})}export{B as default};
