import{u as C,r as a,j as e}from"./index-Bz7ikJcQ.js";import{u as N,c as j,d as O,s as S,G as E,F,a as $}from"./FeedbackMessage-BJ9LOw3J.js";import{S as z}from"./Stars-CRCi0YeK.js";const G=s=>{const n=[s],i=S.filter(r=>r.id!==s.id).sort(()=>Math.random()-.5),l=Math.min(3,i.length);for(let r=0;r<l;r++)n.push(i[r]);return n.sort(()=>Math.random()-.5)},I=()=>{const{recordAttempt:s}=C(),n=N(),[c,i]=a.useState(null),[l,r]=a.useState([]),[u,m]=a.useState(0),[p,x]=a.useState(0),[t,d]=a.useState({show:!1,type:"",message:""}),[y,g]=a.useState(null),[k,w]=a.useState(!1),b=j("correct"),v=j("wrong"),M=O(),f=a.useCallback(()=>{const h=Math.floor(Math.random()*S.length),o=S[h];i(o),r(G(o)),d({show:!1,type:"",message:""}),n(`Find the ${o.name}`)},[n]);return a.useEffect(()=>{f()},[f]),{currentShape:c,options:l,score:u,attempts:p,feedback:t,shakeId:y,showStars:k,handleOptionClick:h=>{x(o=>o+1),h.id===c.id?(m(o=>o+1),w(!0),b?.(),s("shape-match",!0),n("Amazing!"),d({show:!0,type:"success",message:"ðŸŒŸ Perfect!"}),setTimeout(()=>{w(!1),f()},1500)):(M(200),v?.(),g(h.id),s("shape-match",!1),n("Try again"),d({show:!0,type:"error",message:"Try again!"}),setTimeout(()=>{g(null),d({show:!1,type:"",message:""})},800))},speak:n}};function P(){const{currentShape:s,options:n,score:c,feedback:i,shakeId:l,showStars:r,handleOptionClick:u,speak:m}=I(),[p,x]=a.useState("portrait");return a.useEffect(()=>{const t=()=>{x(window.innerHeight>window.innerWidth?"portrait":"landscape")};return t(),window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),e.jsxs(E,{title:"Shape Match",score:c,children:[e.jsx(F,{feedback:i}),s&&e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("p",{className:"text-text-secondary text-sm mb-1",children:"Find the..."}),e.jsxs("div",{className:"flex items-center justify-center gap-3 bg-gray-100 rounded-full py-2 px-4",children:[e.jsx("div",{className:`w-10 h-10 ${s.color} rounded flex items-center justify-center text-white text-2xl`,children:s.emoji}),e.jsx("span",{className:"text-2xl font-bold text-text-primary",children:s.name}),e.jsx("button",{onClick:()=>m(`Find the ${s.name}`),className:"w-10 h-10 bg-primary/20 rounded-full flex items-center justify-center text-xl hover:bg-primary/30 transition-colors","aria-label":"Repeat instruction",children:"ðŸ”Š"})]})]}),e.jsx("div",{className:`
        grid gap-3 place-items-center h-full
        ${p==="portrait"?"grid-cols-2 grid-rows-2":"grid-cols-4 grid-rows-1"}
      `,children:n.map(t=>e.jsxs($,{onClick:()=>u(t),shake:l===t.id,children:[e.jsx("div",{className:`w-20 h-20 ${t.color} rounded-xl flex items-center justify-center text-white text-5xl`,children:t.emoji}),e.jsx("span",{children:t.name})]},t.id))}),r&&e.jsx(z,{})]})}export{P as default};
