import{u as v,r as o,j as e}from"./index-BB6VO97V.js";import{u as C,a as S,b as F,s as x,G as $,F as I}from"./FeedbackMessage-B_sh1LP-.js";import{S as O}from"./Stars-CONppCjX.js";const E=t=>{const n=[t],c=x.filter(s=>s.id!==t.id).sort(()=>Math.random()-.5),l=Math.floor(Math.random()*2)+2;for(let s=0;s<l&&s<c.length;s++)n.push(c[s]);return n.sort(()=>Math.random()-.5)},G=()=>{const{recordAttempt:t}=v(),n=C(),[i,c]=o.useState(null),[l,s]=o.useState([]),[h,u]=o.useState(0),[a,j]=o.useState(0),[y,d]=o.useState({show:!1,type:"",message:""}),[b,f]=o.useState(null),[k,g]=o.useState(!1),w=S("correct"),M=S("wrong"),N=F(),p=o.useCallback(()=>{const m=Math.floor(Math.random()*x.length),r=x[m];c(r),s(E(r)),d({show:!1,type:"",message:""}),n(`Find the ${r.name}`)},[n]);return o.useEffect(()=>{p()},[p]),{currentShape:i,options:l,score:h,attempts:a,feedback:y,shakeId:b,showStars:k,handleOptionClick:m=>{j(r=>r+1),m.id===i.id?(u(r=>r+1),g(!0),w?.(),t("shape-match",!0),d({show:!0,type:"success",message:"ðŸŒŸ Perfect!"}),setTimeout(()=>{g(!1),p()},1500)):(N(200),M?.(),f(m.id),t("shape-match",!1),d({show:!0,type:"error",message:"Try again!"}),setTimeout(()=>{f(null),d({show:!1,type:"",message:""})},800))},speak:n}};function L(){const{currentShape:t,options:n,score:i,feedback:c,shakeId:l,showStars:s,handleOptionClick:h,speak:u}=G();return e.jsxs($,{title:"Shape Match",score:i,children:[e.jsx(I,{feedback:c}),t&&e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("p",{className:"text-text-secondary mb-2",children:"Find the..."}),e.jsxs("div",{className:"flex items-center justify-center gap-4 bg-gray-100 rounded-full py-3 px-6",children:[e.jsx("div",{className:`w-16 h-16 ${t.color} rounded-lg flex items-center justify-center text-4xl text-white`,children:t.emoji}),e.jsx("span",{className:"text-3xl font-bold text-text-primary",children:t.name}),e.jsx("button",{onClick:()=>u(`Find the ${t.name}`),className:"w-12 h-12 bg-primary/20 rounded-full flex items-center justify-center text-2xl hover:bg-primary/30 transition-colors","aria-label":"Repeat instruction",children:"ðŸ”Š"})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-4 max-w-md mx-auto",children:n.map(a=>e.jsxs("div",{onClick:()=>h(a),className:`
              ${a.color} rounded-2xl p-6 cursor-pointer shadow-lg flex flex-col items-center gap-2
              transition-all transform hover:scale-105 active:scale-95
              ${l===a.id?"animate-shake":""}
              ${t?.id===a.id?"ring-4 ring-primary ring-opacity-50":""}
            `,role:"button",tabIndex:0,children:[e.jsx("span",{className:"text-7xl text-white",children:a.emoji}),e.jsx("span",{className:"text-xl font-medium text-white",children:a.name})]},a.id))}),s&&e.jsx(O,{})]})}export{L as default};
